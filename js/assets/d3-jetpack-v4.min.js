(function(d,e){"object"===typeof exports&&"undefined"!==typeof module?e(exports,require("d3-selection"),require("d3-transition"),require("d3-axis"),require("d3-scale"),require("d3-collection"),require("d3-queue"),require("d3-request")):"function"===typeof define&&define.amd?define("exports d3-selection d3-transition d3-axis d3-scale d3-collection d3-queue d3-request".split(" "),e):e(d.d3=d.d3||{},d.d3,d.d3,d.d3,d.d3,d.d3,d.d3,d.d3)})(this,function(d,e,r,m,n,p,q,k){function l(a){if("string"===typeof a){var b=
{},c=a.split(/([\.#])/g),f;for(a=c.shift();f=c.shift();)"."==f?b["class"]=b["class"]?b["class"]+" "+c.shift():c.shift():"#"==f&&(b.id=c.shift());return{tag:a,attr:b}}return a}function g(){for(var a=arguments,b=0,c=a.length;b<c;){if("string"===typeof a[b]||"number"===typeof a[b])a[b]=function(a){return function(b){return b[a]}}(a[b]);b++}return function(b){for(var c=0,d=a.length;c++<d;)b=a[c-1].call(this,b);return b}}g.not=function(a){return!a};g.run=function(a){return a()};g.objToFn=function(a,b){1==
    arguments.length&&(b=void 0);return function(b){return a[b]}};e.selection.prototype.translate=function(a){return this.attr("transform",function(b,c){return"translate("+["function"==typeof a?a.call(this,b,c):a]+")"})};e.selection.prototype.append=function(a){var b=l(a),c;a=e.creator(b.tag);c=this.select(function(){return this.appendChild(a.apply(this,arguments))});for(var f in b.attr)c.attr(f,b.attr[f]);return c};e.selection.prototype.selectAppend=function(a){var b=e.selector(a),c=l(a),f;a=e.creator(c.tag);
    f=this.select(function(){return b.apply(this,arguments)||this.appendChild(a.apply(this,arguments))});for(var d in c.attr)f.attr(d,c.attr[d]);return f};e.selection.prototype.tspans=function(a,b){return this.selectAll("tspan").data(a).enter().append("tspan").text(function(a){return a}).attr("x",0).attr("dy",function(a,d){return d?b||15:0})};e.selection.prototype.appendMany=function(a,b){return this.selectAll(null).data(a).enter().append(b)};e.selection.prototype.at=function(a,b){if("object"==typeof a){for(var c in a)this.attr(c.replace(/([a-z\d])([A-Z])/g,
    "$1-$2").toLowerCase(),a[c]);return this}return 1==arguments.length?this.attr(a):this.attr(a,b)};e.selection.prototype.st=function(a,b){function c(a,b,c){b=b.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase();~"top left bottom right padding-top padding-left padding-bottom padding-right border-top b-width border-left-width border-botto-width m border-right-width  margin-top margin-left margin-bottom margin-right font-size width height stroke-width line-height margin padding border max-width min-width".indexOf(b)?
    a.style(b,"function"==typeof c?g(c,d):d(c)):a.style(b,c);return a}function d(a){return a.match?a:a+"px"}if("object"==typeof a){for(var e in a)c(this,e,a[e]);return this}return 1==arguments.length?this.style(a):c(this,a,b)};e.selection.prototype.prop=e.selection.prototype.property;d.wordwrap=function(a,b){var c=a.split(" "),d=[],e=[],g=b||40,h=0;c.forEach(function(a){h+a.length>g&&(d.push(e.join(" ")),h=e.length=0);h+=a.length;e.push(a)});e.length&&d.push(e.join(" "));return d.filter(function(a){return""!=
    a})};d.parseAttributes=l;d.f=g;d.ascendingKey=function(a){return"function"==typeof a?function(b,c){return a(b)<a(c)?-1:a(b)>a(c)?1:a(b)>=a(c)?0:NaN}:function(b,c){return b[a]<c[a]?-1:b[a]>c[a]?1:b[a]>=c[a]?0:NaN}};d.descendingKey=function(a){return"function"==typeof a?function(b,c){return a(c)<a(b)?-1:a(c)>a(b)?1:a(c)>=a(b)?0:NaN}:function(b,c){return c[a]<b[a]?-1:c[a]>b[a]?1:c[a]>=b[a]?0:NaN}};d.conventions=function(a){a=a||{};a.margin=a.margin||{top:20,right:20,bottom:20,left:20};a.width=a.width||
    a.totalWidth-a.margin.left-a.margin.right||900;a.height=a.height||a.totalHeight-a.margin.top-a.margin.bottom||460;a.totalWidth=a.width+a.margin.left+a.margin.right;a.totalHeight=a.height+a.margin.top+a.margin.bottom;a.parentSel=a.parentSel||e.select("body");a.rootsvg=a.parentSel.append("svg");a.svg=a.rootsvg.attr("width",a.totalWidth).attr("height",a.totalHeight).append("g").attr("transform","translate("+a.margin.left+","+a.margin.top+")");a.x=a.x||n.scaleLinear().range([0,a.width]);a.y=a.y||n.scaleLinear().range([a.height,
    0]);a.xAxis=a.xAxis||m.axisBottom().scale(a.x);a.yAxis=a.yAxis||m.axisLeft().scale(a.y);a.drawAxis=function(){a.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+a.height+")").call(a.xAxis);a.svg.append("g").attr("class","y axis").call(a.yAxis)};return a};d.attachTooltip=function(a,b,c){function d(a){b.classed("tooltip-hidden",!1).html("").appendMany(c,"div").html(function(b){return b(a)});e.select(this).classed("tooltipped",!0)}function g(a){a=b;if(a.size()){var c=e.event,d=
    c.clientX,c=c.clientY,f=a.node().getBoundingClientRect();a.style("top",c+(window.scrollY?window.scrollY:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)-f.height-18+"px");a.style("left",Math.min(Math.max(20,d-f.width/2),window.innerWidth-f.width-20)+"px")}}function k(a){b.classed("tooltip-hidden",!0);e.selectAll(".tooltipped").classed("tooltipped",!1)}if(a.size()){b=b||e.select(".tooltip");a.on("mouseover.attachTooltip",d).on("mousemove.attachTooltip",
    g).on("mouseout.attachTooltip",k).on("click.attachTooltip",function(a){console.log(a)});var h=a.datum();c=c||p.keys(h).filter(function(a){return"object"!=typeof h[a]&&"array"!=h[a]}).map(function(a){return function(b){return a+": <b>"+b[a]+"</b>"}})}};d.loadData=function(a,b){var c=q.queue();a.forEach(function(a){var d=a.split(".").reverse()[0],d={csv:k.csv,tsv:k.tsv,json:k.json}[d];if(!d)return b(Error("Invalid type",a));c.defer(d,a)});c.awaitAll(b)};d.nestBy=function(a,b){return p.nest().key(b).entries(a).map(function(a){a.values.key=
    a.key;return a.values})};d.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};Object.defineProperty(d,"__esModule",{value:!0})});