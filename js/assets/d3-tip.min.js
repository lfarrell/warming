/**
 * d3.tip
 * Copyright (c) 2013 Justin Palmer
 *
 * Tooltips for d3.js SVG visualizations
 */
(function(k,f){if("function"===typeof define&&define.amd)define(["d3-collection","d3-selection"],f);else if("object"===typeof module&&module.exports){var b=require("d3-collection"),l=require("d3-selection");module.exports=f(b,l)}else b=k.d3,k.d3.tip=f(b,b)})(this,function(k,f){return function(){function b(a){n=(a=a.node())?"svg"===a.tagName.toLowerCase()?a:a.ownerSVGElement:null;n&&(c=n.createSVGPoint(),h.appendChild(d))}function l(){var a=f.select(document.createElement("div"));a.style("position","absolute").style("top",0).style("opacity",0).style("pointer-events","none").style("box-sizing","border-box");return a.node()}function g(){null==d&&(d=l(),h.appendChild(d));return f.select(d)}function e(){for(var a=t||f.event.target;null==a.getScreenCTM&&null==a.parentNode;)a=a.parentNode;var b={},d=a.getScreenCTM(),a=a.getBBox(),e=a.width,g=a.height,h=a.y;c.x=a.x;c.y=h;b.nw=c.matrixTransform(d);c.x+=e;b.ne=c.matrixTransform(d);c.y+=g;b.se=c.matrixTransform(d);c.x-=e;b.sw=c.matrixTransform(d);c.y-=
    g/2;b.w=c.matrixTransform(d);c.x+=e;b.e=c.matrixTransform(d);c.x-=e/2;c.y-=g/2;b.n=c.matrixTransform(d);c.y+=g;b.s=c.matrixTransform(d);return b}function m(a){return"function"===typeof a?a:function(){return a}}var p=function(){return"n"},q=function(){return[0,0]},r=function(){return" "},h=document.body,d=l(),n=null,c=null,t=null;b.show=function(){var a=Array.prototype.slice.call(arguments);a[a.length-1]instanceof SVGElement&&(t=a.pop());var c=r.apply(this,a),d=q.apply(this,a),a=p.apply(this,a),e=
    g(),f=u.length,k=document.documentElement.scrollTop||h.scrollTop,l=document.documentElement.scrollLeft||h.scrollLeft;for(e.html(c).style("opacity",1).style("pointer-events","all");f--;)e.classed(u[f],!1);c=v.get(a).apply(this);e.classed(a,!0).style("top",c.top+d[0]+k+"px").style("left",c.left+d[1]+l+"px");return b};b.hide=function(){g().style("opacity",0).style("pointer-events","none");return b};b.attr=function(a,c){if(2>arguments.length&&"string"===typeof a)return g().attr(a);var d=Array.prototype.slice.call(arguments);
    f.selection.prototype.attr.apply(g(),d);return b};b.style=function(a,c){if(2>arguments.length&&"string"===typeof a)return g().style(a);var d=Array.prototype.slice.call(arguments);f.selection.prototype.style.apply(g(),d);return b};b.direction=function(a){if(!arguments.length)return p;p=null==a?a:m(a);return b};b.offset=function(a){if(!arguments.length)return q;q=null==a?a:m(a);return b};b.html=function(a){if(!arguments.length)return r;r=null==a?a:m(a);return b};b.rootElement=function(a){if(!arguments.length)return h;
    h=null==a?a:m(a);return b};b.destroy=function(){d&&(g().remove(),d=null);return b};var v=k.map({n:function(){var a=e();return{top:a.n.y-d.offsetHeight,left:a.n.x-d.offsetWidth/2}},s:function(){var a=e();return{top:a.s.y,left:a.s.x-d.offsetWidth/2}},e:function(){var a=e();return{top:a.e.y-d.offsetHeight/2,left:a.e.x}},w:function(){var a=e();return{top:a.w.y-d.offsetHeight/2,left:a.w.x-d.offsetWidth}},nw:function(){var a=e();return{top:a.nw.y-d.offsetHeight,left:a.nw.x-d.offsetWidth}},ne:function(){var a=e();return{top:a.ne.y-d.offsetHeight,left:a.ne.x}},sw:function(){var a=e();return{top:a.sw.y,left:a.sw.x-d.offsetWidth}},se:function(){var a=e();return{top:a.se.y,left:a.se.x}}}),u=v.keys();return b}});